<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System_VM_D62E - ç™»å½•</title>
    <style>
        /* åŸºç¡€æ ·å¼ */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        body {
            background: linear-gradient(135deg, #0a0a1a 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
        }
        
        /* èƒŒæ™¯ç½‘æ ¼ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(0, 212, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 212, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            animation: gridMove 30s linear infinite;
            pointer-events: none;
            z-index: -1;
        }
        
        /* è¿”å›æŒ‰é’® */
        .back-to-home {
            position: absolute;
            top: 20px;
            left: 20px;
        }
        
        .back-btn {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: #00f3ff;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: rgba(0, 243, 255, 0.2);
            transform: translateX(-3px);
        }
        
        /* è®¤è¯å®¹å™¨ */
        .auth-container {
            background: rgba(20, 25, 45, 0.9);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 12px;
            padding: 40px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 1;
            animation: fadeIn 0.5s ease;
        }
        
        /* ç§»åŠ¨ç«¯é€‚é… */
        @media (max-width: 768px) {
            .auth-container {
                padding: 30px 20px;
                max-width: 90%;
            }
            
            .back-to-home {
                top: 10px;
                left: 10px;
            }
        }
        
        /* å¤´éƒ¨æ ·å¼ */
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .auth-logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(0, 243, 255, 0.3);
        }
        
        .auth-logo::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(0, 243, 255, 0.2) 0%, transparent 70%);
            filter: blur(15px);
            z-index: -1;
        }
        
        .auth-header h1 {
            color: #00f3ff;
            font-size: 1.8rem;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(0, 243, 255, 0.3);
        }
        
        .auth-header p {
            color: #a0a0a0;
            font-size: 0.9rem;
        }
        
        /* é€‰é¡¹å¡ */
        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(0, 243, 255, 0.1);
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            color: #a0a0a0;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .auth-tab.active {
            color: #00f3ff;
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #00c9ff, #007acc);
        }
        
        /* è¡¨å• */
        .auth-form {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            color: #e0e0e0;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 243, 255, 0.2);
            border-radius: 6px;
            color: #e0e0e0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: rgba(0, 243, 255, 0.5);
            box-shadow: 0 0 0 2px rgba(0, 243, 255, 0.1);
        }
        
        .password-input {
            position: relative;
        }
        
        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #a0a0a0;
            cursor: pointer;
            padding: 4px;
        }
        
        /* è¡¨å•é€‰é¡¹ */
        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #a0a0a0;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #00f3ff;
        }
        
        .forgot-password {
            color: #00f3ff;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .forgot-password:hover {
            text-shadow: 0 0 5px rgba(0, 243, 255, 0.5);
        }
        
        /* æäº¤æŒ‰é’® */
        .submit-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #00c9ff, #007acc);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 201, 255, 0.3);
        }
        
        .submit-btn.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* åˆ†éš”çº¿ */
        .auth-divider {
            text-align: center;
            margin: 30px 0;
            position: relative;
            color: #666;
        }
        
        .auth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(0, 243, 255, 0.1);
        }
        
        .auth-divider span {
            background: rgba(20, 25, 45, 0.9);
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }
        
        /* ç¤¾äº¤ç™»å½• */
        .social-login {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }
        
        .social-btn {
            flex: 1;
            padding: 12px;
            border: 1px solid rgba(0, 243, 255, 0.2);
            background: rgba(0, 0, 0, 0.3);
            border-radius: 6px;
            color: #e0e0e0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .social-btn:hover {
            border-color: rgba(0, 243, 255, 0.4);
            background: rgba(0, 243, 255, 0.05);
        }
        
        /* åº•éƒ¨ */
        .auth-footer {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }
        
        .auth-footer a {
            color: #00f3ff;
            text-decoration: none;
        }
        
        /* æ¶ˆæ¯æç¤º */
        .alert {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            animation: slideIn 0.3s ease;
        }
        
        .alert-success {
            background: rgba(0, 255, 128, 0.1);
            border: 1px solid rgba(0, 255, 128, 0.3);
            color: #00ff80;
        }
        
        .alert-error {
            background: rgba(255, 50, 50, 0.1);
            border: 1px solid rgba(255, 50, 50, 0.3);
            color: #ff3232;
        }
        
        .alert-info {
            background: rgba(0, 243, 255, 0.1);
            border: 1px solid rgba(0, 243, 255, 0.3);
            color: #00f3ff;
        }
        
        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        @keyframes spin {
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(40px, 40px); }
        }
    </style>
</head>
<body>
    <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
    <div class="back-to-home">
        <a href="index.html" class="back-btn">
            <span>â†</span> è¿”å›é¦–é¡µ
        </a>
    </div>
    
    <!-- è®¤è¯å®¹å™¨ -->
    <div class="auth-container">
        <!-- å¤´éƒ¨ -->
        <div class="auth-header">
            <div class="auth-logo">
                <img src="logo.png" alt="System_VM_D62E Logo">
            </div>
            <h1>System_VM_D62E</h1>
            <p>æ¢ç´¢æŠ€æœ¯ä¸åˆ›æ„çš„æ— é™å¯èƒ½</p>
        </div>
        
        <!-- é€‰é¡¹å¡ -->
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">ç™»å½•</button>
            <button class="auth-tab" data-tab="register">æ³¨å†Œ</button>
        </div>
        
        <!-- æ¶ˆæ¯æç¤º -->
        <div id="message-container"></div>
        
        <!-- ç™»å½•è¡¨å• -->
        <form id="login-form" class="auth-form active">
            <div class="form-group">
                <label class="form-label">ç”¨æˆ·å / é‚®ç®±</label>
                <input type="text" class="form-input" id="login-identifier" 
                       placeholder="è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">å¯†ç </label>
                <div class="password-input">
                    <input type="password" class="form-input" id="login-password" 
                           placeholder="è¾“å…¥å¯†ç " required>
                    <button type="button" class="password-toggle" data-target="login-password">
                        ğŸ‘
                    </button>
                </div>
            </div>
            
            <div class="form-options">
                <label class="checkbox-label">
                    <input type="checkbox" id="remember-me">
                    <span>è®°ä½æˆ‘</span>
                </label>
                <a href="#" class="forgot-password" onclick="showMessage('å¯†ç é‡ç½®åŠŸèƒ½å¼€å‘ä¸­...', 'info')">å¿˜è®°å¯†ç ï¼Ÿ</a>
            </div>
            
            <button type="submit" class="submit-btn" id="login-btn">
                ç™»å½•
            </button>
            
            <div class="auth-divider">
                <span>æˆ–ä½¿ç”¨ç¤¾äº¤è´¦å·ç™»å½•</span>
            </div>
            
            <div class="social-login">
                <button type="button" class="social-btn" onclick="showMessage('GitHubç™»å½•åŠŸèƒ½å¼€å‘ä¸­...', 'info')">
                    <span>GitHub</span>
                </button>
                <button type="button" class="social-btn" onclick="showMessage('Googleç™»å½•åŠŸèƒ½å¼€å‘ä¸­...', 'info')">
                    <span>Google</span>
                </button>
            </div>
            
            <div class="auth-footer">
                <p>è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ <a href="#" data-switch="register">ç«‹å³æ³¨å†Œ</a></p>
            </div>
        </form>
        
        <!-- æ³¨å†Œè¡¨å• -->
        <form id="register-form" class="auth-form">
            <div class="form-group">
                <label class="form-label">ç”¨æˆ·å</label>
                <input type="text" class="form-input" id="register-username" 
                       placeholder="è¾“å…¥ç”¨æˆ·å" required minlength="3" maxlength="50">
            </div>
            
            <div class="form-group">
                <label class="form-label">é‚®ç®±åœ°å€</label>
                <input type="email" class="form-input" id="register-email" 
                       placeholder="è¾“å…¥é‚®ç®±" required>
            </div>
            
            <div class="form-group">
                <label class="form-label">å§“å</label>
                <input type="text" class="form-input" id="register-fullname" 
                       placeholder="è¾“å…¥æ‚¨çš„å§“å">
            </div>
            
            <div class="form-group">
                <label class="form-label">å¯†ç </label>
                <div class="password-input">
                    <input type="password" class="form-input" id="register-password" 
                           placeholder="è¾“å…¥å¯†ç " required minlength="8">
                    <button type="button" class="password-toggle" data-target="register-password">
                        ğŸ‘
                    </button>
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label">ç¡®è®¤å¯†ç </label>
                <div class="password-input">
                    <input type="password" class="form-input" id="register-confirm-password" 
                           placeholder="å†æ¬¡è¾“å…¥å¯†ç " required>
                    <button type="button" class="password-toggle" data-target="register-confirm-password">
                        ğŸ‘
                    </button>
                </div>
            </div>
            
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="terms-agree" required>
                    <span>æˆ‘åŒæ„ <a href="#" onclick="showMessage('æœåŠ¡æ¡æ¬¾é¡µé¢å¼€å‘ä¸­...', 'info')">æœåŠ¡æ¡æ¬¾</a> å’Œ <a href="#" onclick="showMessage('éšç§æ”¿ç­–é¡µé¢å¼€å‘ä¸­...', 'info')">éšç§æ”¿ç­–</a></span>
                </label>
            </div>
            
            <button type="submit" class="submit-btn" id="register-btn">
                æ³¨å†Œ
            </button>
            
            <div class="auth-footer" style="margin-top: 20px;">
                <p>å·²æœ‰è´¦æˆ·ï¼Ÿ <a href="#" data-switch="login">ç«‹å³ç™»å½•</a></p>
            </div>
        </form>
    </div>
    
    <script>
        // é€‰é¡¹å¡åˆ‡æ¢
        document.querySelectorAll('.auth-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.dataset.tab;
                
                // æ›´æ–°æ¿€æ´»çš„é€‰é¡¹å¡
                document.querySelectorAll('.auth-tab').forEach(t => {
                    t.classList.remove('active');
                });
                this.classList.add('active');
                
                // åˆ‡æ¢è¡¨å•
                document.querySelectorAll('.auth-form').forEach(form => {
                    form.classList.remove('active');
                });
                document.getElementById(`${tabName}-form`).classList.add('active');
                
                // æ¸…ç©ºæ¶ˆæ¯
                clearMessages();
            });
        });
        
        // åˆ‡æ¢é“¾æ¥
        document.querySelectorAll('[data-switch]').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const tabName = this.dataset.switch;
                document.querySelector(`[data-tab="${tabName}"]`).click();
            });
        });
        
        // å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', function() {
                const targetId = this.dataset.target;
                const input = document.getElementById(targetId);
                const type = input.getAttribute('type');
                
                if (type === 'password') {
                    input.setAttribute('type', 'text');
                    this.textContent = 'ğŸ™ˆ';
                } else {
                    input.setAttribute('type', 'password');
                    this.textContent = 'ğŸ‘';
                }
            });
        });
        
        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message, type = 'info') {
            const container = document.getElementById('message-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            
            container.innerHTML = '';
            container.appendChild(alert);
            
            // è‡ªåŠ¨æ¶ˆå¤±
            if (type === 'error' || type === 'success') {
                setTimeout(() => {
                    alert.style.opacity = '0';
                    alert.style.transform = 'translateY(-10px)';
                    setTimeout(() => {
                        if (alert.parentNode) {
                            alert.parentNode.removeChild(alert);
                        }
                    }, 300);
                }, 5000);
            }
        }
        
        // æ¸…ç©ºæ¶ˆæ¯
        function clearMessages() {
            document.getElementById('message-container').innerHTML = '';
        }
        
        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(button) {
            button.disabled = true;
            button.classList.add('loading');
            button.innerHTML = '<span style="visibility: hidden;">' + button.textContent + '</span>';
        }
        
        // éšè—åŠ è½½çŠ¶æ€
        function hideLoading(button) {
            button.disabled = false;
            button.classList.remove('loading');
            button.innerHTML = button.querySelector('span')?.textContent || button.textContent;
        }
        
        // å¯†ç å¼ºåº¦æ£€æŸ¥
        function checkPasswordStrength(password) {
            let strength = 0;
            
            if (password.length >= 8) strength++;
            if (/[a-z]/.test(password)) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            return strength;
        }
        
        // ç™»å½•è¡¨å•æäº¤
        document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const identifier = document.getElementById('login-identifier').value.trim();
            const password = document.getElementById('login-password').value;
            const button = document.getElementById('login-btn');
            
            // éªŒè¯è¾“å…¥
            if (!identifier || !password) {
                showMessage('è¯·è¾“å…¥ç”¨æˆ·å/é‚®ç®±å’Œå¯†ç ', 'error');
                return;
            }
            
            showLoading(button);
            
            setTimeout(() => {
                let isValid = false;
                let userInfo = {};
                
                // æ£€æŸ¥ç®¡ç†å‘˜è´¦å·
                if ((identifier === 'system_admin' || identifier === '3820332398@qq.com') && password === 'Hjy413113') {
                    isValid = true;
                    userInfo = {
                        id: 1,
                        username: 'system_admin',
                        email: '3820332398@qq.com',
                        full_name: 'ç³»ç»Ÿç®¡ç†å‘˜',
                        role: 'admin',
                        status: 'active'
                    };
                }
                // æ£€æŸ¥æ¼”ç¤ºç”¨æˆ·è´¦å·
                else if (
                    (identifier === 'tech_guru' && password === 'Demo@123456') ||
                    (identifier === 'code_master' && password === 'Demo@123456') ||
                    (identifier === 'design_wizard' && password === 'Demo@123456') ||
                    (identifier === 'new_user_001' && password === 'Demo@123456')
                ) {
                    isValid = true;
                    userInfo = {
                        id: identifier === 'tech_guru' ? 2 : 
                             identifier === 'code_master' ? 3 : 
                             identifier === 'design_wizard' ? 4 : 5,
                        username: identifier,
                        email: identifier === 'tech_guru' ? 'zhangsan@example.com' :
                               identifier === 'code_master' ? 'lisi@example.com' :
                               identifier === 'design_wizard' ? 'wangwu@example.com' : 'zhaoliu@example.com',
                        full_name: identifier === 'tech_guru' ? 'å¼ ä¸‰' :
                                 identifier === 'code_master' ? 'æå››' :
                                 identifier === 'design_wizard' ? 'ç‹äº”' : 'èµµå…­',
                        role: identifier === 'code_master' ? 'moderator' : 'user',
                        status: 'active'
                    };
                }
                
                if (isValid) {
                    showMessage('ç™»å½•æˆåŠŸï¼æ­£åœ¨è·³è½¬...', 'success');
                    
                    // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
                    localStorage.setItem('admin_user', JSON.stringify(userInfo));
                    
                    // æ ¹æ®è§’è‰²é‡å®šå‘
                    if (userInfo.role === 'admin' || userInfo.role === 'moderator') {
                        setTimeout(() => {
                            window.location.href = 'admin.html';
                        }, 1500);
                    } else {
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 1500);
                    }
                } else {
                    showMessage('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯', 'error');
                }
                
                hideLoading(button);
            }, 1000);
        });
        
        // æ³¨å†Œè¡¨å•æäº¤
        document.getElementById('register-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const username = document.getElementById('register-username').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const fullName = document.getElementById('register-fullname').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const terms = document.getElementById('terms-agree').checked;
            const button = document.getElementById('register-btn');
            
            // éªŒè¯è¾“å…¥
            if (!username || !email || !password) {
                showMessage('è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ', 'error');
                return;
            }
            
            if (username.length < 3 || username.length > 50) {
                showMessage('ç”¨æˆ·åé•¿åº¦åº”åœ¨3-50ä¸ªå­—ç¬¦ä¹‹é—´', 'error');
                return;
            }
            
            if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                showMessage('ç”¨æˆ·ååªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿', 'error');
                return;
            }
            
            // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
            const existingUsers = ['system_admin', 'tech_guru', 'code_master', 'design_wizard', 'new_user_001'];
            if (existingUsers.includes(username)) {
                showMessage('ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·é€‰æ‹©å…¶ä»–ç”¨æˆ·å', 'error');
                return;
            }
            
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showMessage('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€', 'error');
                return;
            }
            
            // æ£€æŸ¥é‚®ç®±æ˜¯å¦å·²å­˜åœ¨
            const existingEmails = ['3820332398@qq.com', 'zhangsan@example.com', 'lisi@example.com', 'wangwu@example.com', 'zhaoliu@example.com'];
            if (existingEmails.includes(email)) {
                showMessage('é‚®ç®±å·²è¢«æ³¨å†Œï¼Œè¯·ä½¿ç”¨å…¶ä»–é‚®ç®±', 'error');
                return;
            }
            
            if (password.length < 8) {
                showMessage('å¯†ç é•¿åº¦è‡³å°‘8ä½', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showMessage('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                return;
            }
            
            if (!terms) {
                showMessage('è¯·åŒæ„æœåŠ¡æ¡æ¬¾å’Œéšç§æ”¿ç­–', 'error');
                return;
            }
            
            showLoading(button);
            
            setTimeout(() => {
                // æ¨¡æ‹ŸæˆåŠŸæ³¨å†Œ
                showMessage('æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨ç™»å½•...', 'success');
                
                // ä¿å­˜ç”¨æˆ·ä¿¡æ¯
                const user = {
                    id: Math.floor(Math.random() * 1000) + 100,
                    username: username,
                    email: email,
                    full_name: fullName || username,
                    role: 'user',
                    status: 'active'
                };
                
                localStorage.setItem('admin_user', JSON.stringify(user));
                
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
                
                hideLoading(button);
            }, 1500);
        });
        
        // æ£€æŸ¥æ˜¯å¦å·²ç™»å½•
        function checkLoginStatus() {
            const savedUser = localStorage.getItem('admin_user');
            if (savedUser) {
                try {
                    const user = JSON.parse(savedUser);
                    // å¦‚æœå·²ç™»å½•ï¼Œæ ¹æ®è§’è‰²é‡å®šå‘
                    if (user.role === 'admin' || user.role === 'moderator') {
                        window.location.href = 'admin.html';
                    } else {
                        window.location.href = 'index.html';
                    }
                } catch (error) {
                    console.error('è§£æç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
                }
            }
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });
    </script>
</body>
</html>